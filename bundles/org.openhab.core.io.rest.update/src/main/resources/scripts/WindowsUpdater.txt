@echo off

:: openHAB Auto Update Script for Windows

:: Execute command: [EXEC_COMMAND]

title [TITLE]

:: stop openHAB
call "[RUNTIME_FOLDER]\bin\stop.bat" >nul 2>&1

:: the call to stop trashes the title
title [TITLE]

:: sleep if openHAB was running
if %ERRORLEVEL% == 0 (
   echo Waiting for openHAB to stop
   timeout [SLEEP_TIME] /NOBREAK
)

:: update openHAB
call "[RUNTIME_FOLDER]\bin\update.bat" [TARGET_VERSION]
cls

:: start openHAB
"[EXEC_FOLDER]\start.bat" && exit
